<!-- <!DOCTYPE html>
<html lang="en">

<head>
  <%- include ('../partials/head', {pageTitle}) %>
</head>

<body>
    <div class="contenedor">
      <div class="formHeader">
        <h3 class="text-center">Formulario de carga de productos</h3>
      </div>

      <div class="text-center">
        <form>
          <div class="mb-3">
            <label for="title" class="form-label">Titulo</label>
            <input type="text" name="nombre" class="form-control" id="title" aria-describedby="titleHelp"
              placeholder="Titulo...">
          </div>
          <div class="mb-3">
            <label for="price" class="form-label">Precio</label>
            <input type="number" name="price" step=".01" class="form-control" id="price" aria-describedby="proceHelp"
              placeholder="Precio...">
          </div>
          <div class="mb-3">
            <label for="thumbnail" class="form-label">Foto URL</label>
            <input type="text" name="thumbnail" class="form-control" id="thumbnail" aria-describedby="thumbnailHelp"
              placeholder="Foto...">
          </div>
          <button type="submit" class="btn btn-primary" id="sendForm">Cargar producto</button>
        </form>
      </div>

    </div>

    <script src="/socket.io/socket.io.js"></script>
    <script src="/js/form.js"></script>
    <script>
      const socket = io();

      socket.on('productCreated', (newProduct) => {
        console.log("Se creó un producto", newProduct)
      })

      socket.on('loadProducts', (articles) => {
        console.log(articles)
      })
    </script>
</body>

</html> -->

<!DOCTYPE html>
<html lang="es">

<head>
  <%- include ('../partials/head', {pageTitle}) %>
</head>

<body>

  <div class="container">
    <div class="myCard">
      <div class="row">
        <div class="col-md-6">
          <div class="myLeftCtn">

            <form class="myForm text-center" action="">
              <header>Ingreso de productos</header>
              <div class="form-group">
                <i class="fa-solid fa-box"></i>
                <input class="myInput" type="text" name="nombre" id="title" placeholder="Producto..." required>
              </div>

              <div class="form-group">
                <i class="fa-solid fa-dollar-sign"></i>
                <input class="myInput" type="number" name="price" id="price" placeholder="Precio..." required>
              </div>

              <div class="form-group">
                <i class="fa-solid fa-image"></i>
                <input class="myInput" type="text" name="thumbnail" id="thumbnail" placeholder="Miniatura..." required>
              </div>

              <input class="buttonSubmit" type="submit" id="sendForm" value="Guardar producto">


            </form>
          </div>
        </div>

        <div class="col-md-6">
          <div class="myRightCtn">
            <div class="box">
              <header>Lista de productos</header>

              <table class="table table-striped">
                <thead>
                  <tr>
                    <th scope="col">Producto</th>
                    <th scope="col">Precio</th>
                    <th scope="col">Miniatura</th>
                  </tr>
                </thead>
                <tbody>
                  <% products.forEach(product=> { %>
                    <tr>
                      <td>
                        <%= product.nombre %>
                      </td>
                      <td>$<%= product.precio %>
                      </td>
                      <td><img class="picThumb" src="<%= product.thumbnail %>" alt="Pic of the product"></td>
                    </tr>
                    <% }) %>
                      <% if (products.length <=0) { %>
                        <tr>
                          <td class="text-center" colspan="3"> No hay productos </td>
                        </tr>
                        <% } %>
                </tbody>
              </table>

            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <script src="/socket.io/socket.io.js"></script>
  <script src="/js/form.js"></script>
  <script>
    const socket = io();

    socket.on("productCreated", (newProduct) => {
      console.log("Se creó un producto", newProduct);
    });

    socket.on("loadProducts", (articles) => {
      console.log(articles);
    });
  </script>

</body>

</html>